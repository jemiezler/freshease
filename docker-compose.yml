services:
  api:
    image: asia-southeast1-docker.pkg.dev/nodal-kite-477007-s4/freshease/api:latest
    container_name: freshease-api
    ports: ["8000:8080"]
    env_file: .env.prod
    restart: unless-stopped

  admin:
    image: asia-southeast1-docker.pkg.dev/nodal-kite-477007-s4/freshease/admin:latest
    container_name: freshease-admin

    ports: ["3000:3000"]
    environment:
      # Client-side needs NEXT_PUBLIC_* at build-time; SSR-only envs can be runtime.
      # If your UI calls the API through the browser, keep NEXT_PUBLIC_*.
      - NEXT_PUBLIC_API_BASE_URL=https://freshease.jemiezler.site/api
      # Optional SSR-only vars (read on server via process.env.*)
      # - INTERNAL_API_BASE=http://freshease-api:8080
      - NODE_ENV=production
      - PORT=3000
    depends_on:
      - api
    restart: unless-stopped
